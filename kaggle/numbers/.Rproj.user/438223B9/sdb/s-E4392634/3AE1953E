{
    "contents" : "### R code from vignette source 'vignettes/MLInterfaces/inst/doc/MLprac2_2.Rnw'\n\n###################################################\n### code chunk number 1: intro1\n###################################################\nlibrary(\"MASS\")\ndata(\"crabs\")\ndim(crabs)\ncrabs[1:4,]\ntable(crabs$sex)\n\n\n###################################################\n### code chunk number 2: figbwplot\n###################################################\nlibrary(\"lattice\")\nprint(bwplot(RW~sp|sex, data=crabs))\n\n\n###################################################\n### code chunk number 3: dop\n###################################################\nm1 = glm(sp~RW, data=crabs, family=binomial)\nsummary(m1)\n\n\n###################################################\n### code chunk number 4: domods\n###################################################\nplot(predict(m1,type=\"response\"), crabs$sp)\ntable(predict(m1,type=\"response\")>.5, crabs$sp)\nm2 = update(m1, subset=(sex==\"F\"))\ntable(predict(m2,type=\"response\")>.5, crabs$sp[crabs$sex==\"F\"])\n\n\n###################################################\n### code chunk number 5: doml1\n###################################################\nlibrary(MLInterfaces)\nfcrabs = crabs[crabs$sex == \"F\", ]\nml1 = MLearn( sp~RW, fcrabs, glmI.logistic(thresh=.5), c(1:30, 51:80), \n              family=binomial)\nml1\nconfuMat(ml1)\n\n\n###################################################\n### code chunk number 6: doscra\n###################################################\nset.seed(123)\nsfcrabs = fcrabs[ sample(nrow(fcrabs)),  ]\n\n\n###################################################\n### code chunk number 7: domods\n###################################################\nsml1 = MLearn( sp~RW, sfcrabs, glmI.logistic(thresh=.5), \n               c(1:30, 51:80), \n               family=binomial)\nconfuMat(sml1)\nsmx1 = MLearn( sp~RW, sfcrabs, glmI.logistic(thresh=.5), \n               xvalSpec(\"LOG\", 5, function(data, clab, iternum) { \n                 which(rep(1:5, each=20) == iternum) }), \n               family=binomial)\nconfuMat(smx1)\n\n\n###################################################\n### code chunk number 8: figdopa\n###################################################\npairs(crabs[,-c(1:3)], col=ifelse(crabs$sp==\"B\", \"blue\", \"orange\"))\n\n\n###################################################\n### code chunk number 9: dopc\n###################################################\npc1 = prcomp( crabs[,-c(1:3)] )\n\n\n###################################################\n### code chunk number 10: figdopc\n###################################################\npairs(pc1$x, col=ifelse(crabs$sp==\"B\", \"blue\", \"orange\"))\n\n\n###################################################\n### code chunk number 11: figdobi\n###################################################\nbiplot(pc1, choices=2:3, col=c(\"#80808080\", \"red\"))\n\n\n###################################################\n### code chunk number 12: checkClaim\n###################################################\nstopifnot(eval(formals(heatmap)$scale)[1]==\"row\")\n\n\n###################################################\n### code chunk number 13: figdohm\n###################################################\nX = data.matrix(crabs[,-c(1:3)])\nheatmap(t(X), \n        ColSideColors=ifelse(crabs$sp==\"O\", \"orange\", \"blue\"),\n        col = colorRampPalette(c(\"blue\", \"white\", \"red\"))(255))\n\n\n###################################################\n### code chunk number 14: docl\n###################################################\ncl = hclust(dist(X))\ntr = cutree(cl,2)\ntable(tr)\n\n\n###################################################\n### code chunk number 15: dos\n###################################################\nlibrary(cluster)\nsil = silhouette( tr, dist(X) )\nplot(sil)\n\n\n###################################################\n### code chunk number 16: newes\n###################################################\nfeat2 = t(data.matrix(crabs[, -c(1:3)]))\npd2 = new(\"AnnotatedDataFrame\", crabs[,1:2])\ncrES = new(\"ExpressionSet\", exprs=feat2, phenoData=pd2)\ncrES$spsex = paste(crES$sp, crES$sex, sep=\":\")\ntable(crES$spsex)\n\n\n###################################################\n### code chunk number 17: doper\n###################################################\nset.seed(1234)\ncrES = crES[ , sample(1:200, size=200, replace=FALSE)]\n\n\n###################################################\n### code chunk number 18: dotr\n###################################################\nlibrary(rpart)\ntr1 = MLearn(spsex~., crES, rpartI, 1:140)\ntr1\nconfuMat(tr1)\n\n\n###################################################\n### code chunk number 19: doplTree\n###################################################\nplot(RObject(tr1))\ntext(RObject(tr1))\n\n\n###################################################\n### code chunk number 20: doccp\n###################################################\nplotcp(RObject(tr1))\n\n\n###################################################\n### code chunk number 21: dorf\n###################################################\nset.seed(124)\nlibrary(randomForest)\nrf1 = MLearn(spsex~., crES, randomForestI, 1:140 )\nrf1\ncm = confuMat(rf1)\ncm\n\n\n###################################################\n### code chunk number 22: dold\n###################################################\nld1 = MLearn(spsex~., crES, ldaI, 1:140 )\nld1\nconfuMat(ld1)\nxvld = MLearn( spsex~., crES, ldaI, xvalSpec(\"LOG\", 5, balKfold.xvspec(5)))\nconfuMat(xvld)\n\n\n###################################################\n### code chunk number 23: dnn\n###################################################\nnn1 = MLearn(spsex~., crES, nnetI, 1:140, size=3, decay=.1)\nnn1\nRObject(nn1)\nconfuMat(nn1)\n\n\n###################################################\n### code chunk number 24: doxx\n###################################################\nxvnnBAD = MLearn( spsex~., crES, nnetI, \n                  xvalSpec(\"LOG\", 5, function(data, clab, iternum) {\n                    which( rep(1:5,each=40) == iternum ) }),\n                  size=3, decay=.1 )\nxvnnGOOD = MLearn( spsex~., crES, nnetI, \n                   xvalSpec(\"LOG\", 5, balKfold.xvspec(5) ),\n                   size=3, decay=.1 )\n\n\n###################################################\n### code chunk number 25: lktann\n###################################################\nconfuMat(xvnnBAD)\nconfuMat(xvnnGOOD)\n\n\n###################################################\n### code chunk number 26: dnn\n###################################################\nsv1 = MLearn(spsex~., crES, svmI, 1:140)\nsv1\nRObject(sv1)\nconfuMat(sv1)\n\n\n###################################################\n### code chunk number 27: doxxs\n###################################################\nxvsv = MLearn( spsex~., crES, svmI, xvalSpec(\"LOG\", 5,\n                                             balKfold.xvspec(5)))\n\n\n###################################################\n### code chunk number 28: lktasv\n###################################################\nconfuMat(xvsv)\n\n\n###################################################\n### code chunk number 29: setupALL\n###################################################\nlibrary(\"ALL\")\ndata(\"ALL\")\nbALL = ALL[, substr(ALL$BT,1,1) == \"B\"]\nfus = bALL[, bALL$mol.biol %in% c(\"BCR/ABL\", \"NEG\")]\nfus$mol.biol = factor(fus$mol.biol)\nfus\n\n\n###################################################\n### code chunk number 30: getq\n###################################################\nmads = apply(exprs(fus),1,mad)\nfusk = fus[ mads > sort(mads,decr=TRUE)[300], ]\nfcol = ifelse(fusk$mol.biol==\"NEG\", \"green\", \"red\")\n\n\n###################################################\n### code chunk number 31: dohALL (eval = FALSE)\n###################################################\n## heatmap(exprs(fusk), ColSideColors=fcol)\n\n\n###################################################\n### code chunk number 32: dopcALL\n###################################################\nPCg = prcomp(t(exprs(fusk)))\n\n\n###################################################\n### code chunk number 33: lkscre\n###################################################\nplot(PCg)\n\n\n###################################################\n### code chunk number 34: lkprALL\n###################################################\npairs(PCg$x[,1:5],col=fcol,pch=19)\n\n\n###################################################\n### code chunk number 35: dobiALL\n###################################################\nbiplot(PCg)\n\n\n###################################################\n### code chunk number 36: dld1\n###################################################\ndld1 = MLearn( mol.biol~., fusk, dldaI, 1:40 )\n\n\n###################################################\n### code chunk number 37: dld2\n###################################################\ndld1\nconfuMat(dld1)\n\n\n###################################################\n### code chunk number 38: dld3\n###################################################\nnnALL = MLearn( mol.biol~., fusk, nnetI, 1:40, size=5, decay=.01,\n                MaxNWts=2000 )\n\n\n###################################################\n### code chunk number 39: dld4\n###################################################\nconfuMat(nnALL)\n\n\n###################################################\n### code chunk number 40: dld5\n###################################################\nrfALL = MLearn( mol.biol~., fusk, randomForestI, 1:40 )\n\n\n###################################################\n### code chunk number 41: dld6\n###################################################\nrfALL\nconfuMat(rfALL)\n\n\n###################################################\n### code chunk number 42: lkrda\n###################################################\nrdaALL = MLearn( mol.biol~., fusk, rdacvI, 1:40 )\n\n\n###################################################\n### code chunk number 43: lkrda2\n###################################################\nrdaALL\nconfuMat(rdaALL)\n\n\n###################################################\n### code chunk number 44: getgl\n###################################################\nlibrary(hgu95av2.db)\npsid = RObject(rdaALL)$keptFeatures\npsid = gsub(\"^X\", \"\", psid) # make.names is run inopportunely\nmget(psid, hgu95av2GENENAME)[1:5]\n\n\n###################################################\n### code chunk number 45: getko\n###################################################\nlibrary(keggorthology)\ndata(KOgraph)\nadj(KOgraph, nodes(KOgraph)[1])\nEIP = getKOprobes(\"Environmental Information Processing\")\nGIP = getKOprobes(\"Genetic Information Processing\")\nlength(intersect(EIP, GIP))\nEIPi = setdiff(EIP, GIP)\nGIP = setdiff(GIP, EIP)\nEIP = EIPi\nEfusk = fusk[ featureNames(fusk) %in% EIP, ]\nGfusk = fusk[ featureNames(fusk) %in% GIP, ]\n\n\n###################################################\n### code chunk number 46: dofs\n###################################################\ndldFS = MLearn( mol.biol~., fusk, dldaI, xvalSpec(\"LOG\", 5,\n                                                  balKfold.xvspec(5), fs.absT(30) ))\ndldFS\nconfuMat(dld1)\nconfuMat(dldFS)\n\n\n###################################################\n### code chunk number 47: lksess\n###################################################\nsessionInfo()\n",
    "created" : 1371037478149.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "4011434891",
    "id" : "3AE1953E",
    "lastKnownWriteTime" : 1371037210,
    "path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}